"0","##############################"
"0","df_bal=read.csv(""BalanceSheet_withoutDuplicates.csv"", fileEncoding = ""UTF-8"")"
"0",""
"0","#### remove '-' in names of parts"
"0","df_bal$Parts1_en<-gsub('[-]',' ',df_bal$Parts1_en)"
"0","df_bal$Parts2_en<-gsub('[-]',' ',df_bal$Parts2_en)"
"0",""
"0","### remove spaces before and after string"
"0","df_bal$Parts1_en<-stringr::str_trim(df_bal$Parts1_en,side='both')"
"0","df_bal$Parts2_en<-stringr::str_trim(df_bal$Parts2_en,side='both')"
"0",""
"0","# remove the column ""BHD.."" which is empty, while column ""BHD"" does have data"
"0","#sum(df_bal$BHD..,na.rm = T)   # no value in that column"
"0","#sum(df_bal$BHD,na.rm = T)     # there are some data in that column"
"0","df_bal<-df_bal[,colnames(df_bal)[!colnames(df_bal)%in% c(""BHD.."",""TOTAL"")]]   # removing column ""BHD.."" and column ""TOTAL"""
"0",""
"0","# create a column for Total values of each indicator/row. There are some errors in Total of variables in income statement in files from the central bank"
"0","df_bal$System=rowSums(df_bal[,colnames(df_bal)[!colnames(df_bal) %in% c(""Indicators"",""Date"",""Parts1_fr"",""Parts2_fr"",""Parts1_en"",""Parts2_en"") ]],na.rm = T)"
"0",""
"0","##############################################################################"
"0","## Creating several data frame of indicators to be merged in one data frame ##"
"0","# This is done since, filtering some elements in Parts1_en or Parts2_en can do the total of an indicators where the result should be one minus the other. It is the case for Loan portfolio and Non performing loan."
"0",""
"0","#unique(df_bal$Parts1_en)"
"0","#unique((df_bal%>%filter(Parts1_en==""Asset"" ))$Indicators)"
"0","df_balP1=df_bal%>%filter(Parts1_en %in% c(""Asset"",""Liability"",""Equity""))"
"0","df_balP1$Indicators_en=df_balP1$Parts1_en"
"0",""
"0","#unique(df_bal$Parts1_en)"
"0","#unique((df_bal%>%filter(Parts2_en==""Deposit in US converted in HTG"" ))$Indicators)"
"0","df_balP2=df_bal%>%filter(Parts1_en %in% c(""Liquid asset"",""Non liquid asset"",""Deposit"",""Demand bonds"",""Term bonds"",""Other liabilities"",""Loan portfolio"",""Allowance for bad debts"",""Non performing loan"",""Deposit in US converted in HTG"" ))"
"0","df_balP2$Indicators_en=df_balP2$Parts2_en"
"0",""
"0","#unique(df_bal$Parts2_en)"
"0","#unique((df_bal%>%filter(Parts2_en==""Off balance sheet"" ))$Indicators)"
"0","df_balI=df_bal%>%filter(Indicators %in% c(""ACTIF_LIQUIDE_encaisse"",""ACTIF_LIQUIDE_avoirs_a_la_brh"",""ACTIF_LIQUIDE_avoirs_a_l'etranger"",""ACTIF_LIQUIDE_avoirs_dans_les_banques_locales"",""ACTIF_LIQUIDE_autres_liquidites"" ,""ACTIF_ILLIQUIDE_bons_b.r.h."",""ACTIF_ILLIQUIDE_bons_du_tresor_/_m.e.f."",""ACTIF_ILLIQUIDE_autres_placements"",""ACTIF_ILLIQUIDE_portefeuille_net"",""ACTIF_ILLIQUIDE_immobilisations"",""ACTIF_ILLIQUIDE_autres_actifs"",""ACTIF_ILLIQUIDE_bons_du_tresor/mef"",""DÉPÔT_a_vue"",""DÉPÔT_epargne"",""DÉPÔT_a_terme"",""OBLIGATIONS_À_VUE_banques_locales"",""OBLIGATIONS_À_VUE_banques_a_l'etranger"",""OBLIGATIONS_À_VUE_autres"",""OBLIGATIONS_À_TERME_banques_locales"",""OBLIGATIONS_À_TERME_banque_a_l'etranger"",""OBLIGATIONS_À_TERME_autres"" ,""AUTRES_PASSIFS_autres_passifs"", ""HORS-BILAN_effets_a_l'encaissement"",""HORS-BILAN_credit_documentaire"",""HORS-BILAN_autres""   ))"
"0","#######"
"0","fdf_indicators_en<-function(){ # function to create a vector of indicators name in English for data frame df_balI"
"0","  dd=data.frame(c(""ACTIF_LIQUIDE_encaisse"",""ACTIF_LIQUIDE_avoirs_a_la_brh"",""ACTIF_LIQUIDE_avoirs_a_l'etranger"",""ACTIF_LIQUIDE_avoirs_dans_les_banques_locales"",""ACTIF_LIQUIDE_autres_liquidites"" ,""ACTIF_ILLIQUIDE_bons_b.r.h."",""ACTIF_ILLIQUIDE_bons_du_tresor_/_m.e.f."",""ACTIF_ILLIQUIDE_autres_placements"",""ACTIF_ILLIQUIDE_portefeuille_net"",""ACTIF_ILLIQUIDE_immobilisations"",""ACTIF_ILLIQUIDE_autres_actifs"",""ACTIF_ILLIQUIDE_bons_du_tresor/mef"",""DÉPÔT_a_vue"",""DÉPÔT_epargne"",""DÉPÔT_a_terme"",""OBLIGATIONS_À_VUE_banques_locales"",""OBLIGATIONS_À_VUE_banques_a_l'etranger"",""OBLIGATIONS_À_VUE_autres"",""OBLIGATIONS_À_TERME_banques_locales"",""OBLIGATIONS_À_TERME_banque_a_l'etranger"",""OBLIGATIONS_À_TERME_autres"" ,""AUTRES_PASSIFS_autres_passifs"", ""HORS-BILAN_effets_a_l'encaissement"",""HORS-BILAN_credit_documentaire"",""HORS-BILAN_autres""   ),"
"0",""
"0","c(""Cash"",""Assets at the central bank"",""assets abroad"",""Assets in local banks"",""Other liquid assets"", ""Central bank bills"",""Treasury bills"", ""other investments"",""Net loan portfolio"",""Fixed assets"",""Other assets"",""Treasury bills"",""Sight deposit"",""Savings deposit"",""Term deposit"",""Demand bonds in local banks"",""Demand bonds in banks abroad"",""Other demand bonds"",""Term bonds in local banks"",""Term bonds in foreign banks"",""Other term bonds"",""Other liabilities"",""Non cash items"","
"0","""Letter of credit"",""Other off balance sheet""))"
"0","  "
"0","colnames(dd)<-c(""Indicators_fr"",""Indicators_en"")"
"0",""
"0","y=NULL"
"0","for(i in 1:length(df_balI$Indicators)){"
"0","  for(j in 1:length(dd$Indicators_fr)){"
"0","    if(df_balI$Indicators[i]==dd$Indicators_fr[j]){"
"0","      y[[i]]=dd$Indicators_en[j]"
"0","    }"
"0","  }"
"0","}"
"0"," return(unlist(y))"
"0","}"
"0","#fdf_indicators_en()"
"0","#(data.frame(df_balI$Indicators,fdf_indicators_en()))"
"0","#################"
"0","df_balI$Indicators_en=fdf_indicators_en()  # adding a column with indicators names in English"
"0","##################"
"0","# Merging the data frames of balance sheet"
"0","df_balance=rbind.data.frame(df_balP1,df_balP2)"
"0","df_balance=rbind(df_balance,df_balI)"
"0","##########################"
"0",""
